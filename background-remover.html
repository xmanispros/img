<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Background Remover — Smart Cutout | XMAN</title>
  <meta name="description" content="Instantly remove image backgrounds in your browser. Free, private, and fast. Download true transparent PNGs. XMAN Background Remover." />
  <link rel="canonical" href="https://example.com/" />
  <meta property="og:title" content="XMAN — Background Remover" />
  <meta property="og:description" content="Remove backgrounds perfectly. Transparent PNG export." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://example.com/" />
  <meta name="twitter:card" content="summary_large_image" />
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "name":"XMAN Background Remover",
    "applicationCategory":"BrowserApplication",
    "operatingSystem":"Web",
    "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"}
  }
  </script>
  <style>
    :root{
      --primary:#ff4d00; /* orange from design */
      --primary-dark:#e54300;
      --bg:#ffffff;
      --text:#1e293b;
      --muted:#64748b;
      --panel:#f9fafb;
      --border:#e2e8f0;
      --shadow:0 10px 30px #00000014;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font:15px/1.5 -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;}

    /* Navbar */
    .navbar{position:sticky;top:0;z-index:50;background:var(--bg);border-bottom:1px solid var(--border);box-shadow:0 2px 10px #00000008}
    .nav-inner{display:flex;align-items:center;gap:14px;padding:12px 16px;max-width:1200px;margin:0 auto}
    .hamburger{width:42px;height:42px;display:grid;place-items:center;border:1px solid var(--border);border-radius:12px;background:#fff;cursor:pointer}
    .hamburger span{width:18px;height:2px;background:var(--text);position:relative;display:block}
    .hamburger span:before,.hamburger span:after{content:"";position:absolute;left:0;right:0;height:2px;background:var(--text)}
    .hamburger span:before{top:-6px}.hamburger span:after{top:6px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.2px}
    .logo{width:28px;height:28px;border-radius:8px;background:linear-gradient(135deg,var(--primary),#ffa07a)}

    .nav-links{margin-left:auto;display:flex;gap:14px}
    .nav-links a{color:var(--text);text-decoration:none;font-weight:600;padding:8px 10px;border-radius:10px}
    .nav-links a:hover{background:#f4f6f8}

    /* Sidebar menu */
    .sidebar{position:fixed;inset:0 40% 0 0;max-width:320px;background:#fff;border-right:1px solid var(--border);transform:translateX(-100%);transition:transform .25s ease;z-index:60;box-shadow:var(--shadow)}
    .sidebar.open{transform:translateX(0)}
    .sidebar header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--border)}
    .sidebar nav{padding:12px}
    .sidebar a{display:block;padding:10px 12px;border-radius:10px;color:var(--text);text-decoration:none;font-weight:600}
    .sidebar a:hover{background:#f5f7fb}
    .backdrop{position:fixed;inset:0;background:#0b102350;opacity:0;pointer-events:none;transition:.25s;z-index:55}
    .backdrop.show{opacity:1;pointer-events:auto}

    header.app-title{display:none}

    .app{display:grid;grid-template-columns:320px 1fr;gap:20px;min-height:calc(100vh - 64px);padding:20px;max-width:1200px;margin:0 auto}
    .panel{background:var(--panel);border:1px solid var(--border);border-radius:20px;box-shadow:var(--shadow)}
    .left{padding:18px}
    .right{padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start}
    .upload{border:2px dashed var(--border);border-radius:18px;padding:24px;text-align:center;cursor:pointer;transition:.2s;background:#fff}
    .upload:hover{border-color:var(--primary);background:#fff5f0}
    .upload input{display:none}
    .hint{font-size:12px;color:var(--muted)}
    label{font-size:13px;color:var(--muted);display:flex;justify-content:space-between;margin:12px 0 6px}
    input[type=range]{width:100%}
    select,button{height:44px;border:none;border-radius:12px;padding:0 14px;font-weight:700;cursor:pointer;font-size:14px}
    button.primary{background:var(--primary);color:white;transition:.2s}
    button.primary:hover{background:var(--primary-dark)}
    button:disabled{opacity:.5;cursor:not-allowed}
    .btn-row{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:16px}
    .canvas-wrap{position:relative;width:100%;max-width:1000px;aspect-ratio:4/3;background:transparent;border:1px solid var(--border);border-radius:20px;display:grid;place-items:center;overflow:hidden}
    canvas{max-width:100%;max-height:80vh;display:block;background:transparent}
    figure{margin:0;width:100%;display:flex;justify-content:center}
    .toolbar{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:14px}
    .small{font-size:12px;color:var(--muted)}
    footer{padding:12px;color:var(--muted);text-align:center;border-top:1px solid var(--border)}

    /* Responsive */
    @media (max-width: 1024px){.app{grid-template-columns:1fr}}
    @media (max-width: 600px){
      .nav-links{display:none}
      .app{padding:14px}
      .btn-row{grid-template-columns:1fr}
    }

    /* Banner Ad placeholder */
    .ad-banner{display:grid;place-items:center;background:#f8fafc;border:1px dashed var(--border);color:var(--muted);height:90px;border-radius:14px;margin-top:16px}

    /* Modal video ad */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:#0b102380;z-index:80}
    .modal.show{display:flex}
    .modal-card{background:#fff;border-radius:16px;max-width:560px;width:92%;box-shadow:var(--shadow);overflow:hidden}
    .modal-header{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;border-bottom:1px solid var(--border)}
    .modal-body{padding:12px}
    .modal-footer{padding:12px;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:8px}
    .pill{background:#0f172a;color:#fff;border-radius:999px;padding:4px 10px;font-size:12px}
  </style>
</head>
<body>
  <!-- Sidebar + Backdrop -->
  <div class="sidebar" id="sidebar" aria-hidden="true">
    <header>
      <strong>Menu</strong>
      <button id="closeSidebar" aria-label="Close" class="hamburger" style="width:36px;height:36px"><span></span></button>
    </header>
    <nav aria-label="Main navigation">
      <a href="#how">How it works</a>
      <a href="#features">Features</a>
      <a href="#faq">FAQ</a>
      <a href="#contact">Contact</a>
    </nav>
  </div>
  <div class="backdrop" id="backdrop"></div>

  <!-- Navbar -->
  <div class="navbar" role="navigation" aria-label="Top">
    <div class="nav-inner">
      <button class="hamburger" id="hamburger" aria-label="Open menu"><span></span></button>
      <div class="brand" aria-label="XMAN brand">
        <div class="logo" aria-hidden="true"></div>
        <span>XMAN</span>
      </div>
      <div class="nav-links">
        <a href="#how">How it works</a>
        <a href="#features">Features</a>
        <a href="#faq">FAQ</a>
      </div>
    </div>
  </div>

  <header class="app-title">
    <h1>Background Remover</h1>
  </header>

  <div class="app">
    <!-- Controls -->
    <aside class="panel left">
      <div class="upload" id="drop">
        <strong>Click or drop an image</strong>
        <div class="hint">JPG / PNG / WebP — processed in your browser</div>
        <input id="file" type="file" accept="image/*" />
      </div>

      <div class="ctrl">
        <label>Segmentation threshold <span id="thv" class="small"></span></label>
        <input id="threshold" type="range" min="0" max="1" step="0.01" value="0.7" />
      </div>

      <div class="ctrl">
        <label>Feather (mask blur px) <span id="blurv" class="small"></span></label>
        <input id="blur" type="range" min="0" max="30" step="1" value="8" />
      </div>

      <div class="btn-row">
        <button id="remove" class="primary" disabled>Remove Background</button>
        <button id="download" disabled>Download PNG</button>
      </div>

      <!-- Banner Ad placeholder (web). If you truly need AdMob, use a mobile WebView app. -->
      <div class="ad-banner" id="bannerAd">
        Banner Ad — replace with your ad tag (AdSense/Ad Manager). AdMob ID: <span id="admobIdText">#admobId</span>
      </div>
    </aside>

    <!-- Preview / Result -->
    <main class="panel right">
      <figure class="canvas-wrap">
        <canvas id="canvas" width="1280" height="960"></canvas>
      </figure>
      <div class="toolbar">
        <button id="fit">Fit</button>
        <button id="reset">Reset</button>
        <span class="small" id="meta"></span>
      </div>
    </main>
  </div>

  <!-- Modal video ad shown before download -->
  <div class="modal" id="videoAdModal" role="dialog" aria-modal="true" aria-labelledby="adTitle">
    <div class="modal-card">
      <div class="modal-header">
        <strong id="adTitle">Sponsored video</strong>
        <span class="pill" id="adCountdown">5</span>
      </div>
      <div class="modal-body">
        <!-- Placeholder video element. Swap with your video/interstitial SDK as needed. -->
        <video id="adVideo" playsinline muted controls style="width:100%;border-radius:12px;max-height:60vh"></video>
        <p class="small" style="margin-top:8px">Your download will start automatically after this ad.</p>
      </div>
      <div class="modal-footer">
        <button id="skipAd" disabled>Skip & Download</button>
      </div>
    </div>
  </div>

  <footer>
    100% client‑side • TensorFlow.js BodyPix • Transparent PNG download
  </footer>

  <!-- TensorFlow.js + BodyPix -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-core@4"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-converter@4"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-webgl@4"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/body-pix@2"></script>

  <script>
  // Navbar + Sidebar
  const hamburger=document.getElementById('hamburger');
  const sidebar=document.getElementById('sidebar');
  const backdrop=document.getElementById('backdrop');
  const closeSidebar=document.getElementById('closeSidebar');
  function toggleSide(open){
    sidebar.classList.toggle('open',open);
    backdrop.classList.toggle('show',open);
    sidebar.setAttribute('aria-hidden', (!open).toString());
  }
  hamburger.addEventListener('click',()=>toggleSide(true));
  closeSidebar.addEventListener('click',()=>toggleSide(false));
  backdrop.addEventListener('click',()=>toggleSide(false));

  // App logic
  const fileInput = document.getElementById('file');
  const drop = document.getElementById('drop');
  const removeBtn = document.getElementById('remove');
  const downloadBtn = document.getElementById('download');
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  const threshold = document.getElementById('threshold');
  const blur = document.getElementById('blur');
  const thv = document.getElementById('thv');
  const blurv = document.getElementById('blurv');
  const fitBtn = document.getElementById('fit');
  const resetBtn = document.getElementById('reset');
  const meta = document.getElementById('meta');

  // Ads (placeholders)
  const admobId = '#admobId'; // provided by user
  document.getElementById('admobIdText').textContent = admobId;
  const videoAdModal = document.getElementById('videoAdModal');
  const adCountdown = document.getElementById('adCountdown');
  const adVideo = document.getElementById('adVideo');
  const skipAd = document.getElementById('skipAd');

  let net = null;
  let sourceImage = new Image();
  let lastResultBlobUrl = null;

  function updateLabels(){ thv.textContent = threshold.value; blurv.textContent = blur.value + 'px'; }
  function fitCanvasToImage(img){ const r=Math.min(1920/img.width,1920/img.height,1); canvas.width=Math.round(img.width*r); canvas.height=Math.round(img.height*r); }
  function fitContain(sw,sh,dw,dh){ const sr=sw/sh, dr=dw/dh; let w,h,x,y; if(sr>dr){w=dw;h=w/sr;x=0;y=(dh-h)/2;} else {h=dh;w=h*sr;y=0;x=(dw-w)/2;} return {w,h,x,y}; }

  drop.addEventListener('click', ()=> fileInput.click());
  drop.addEventListener('dragover', e=>{e.preventDefault(); drop.style.borderColor= 'var(--primary)';});
  drop.addEventListener('dragleave', ()=>{drop.style.borderColor='var(--border)';});
  drop.addEventListener('drop', e=>{e.preventDefault(); drop.style.borderColor='var(--border)'; handleFile(e.dataTransfer.files[0]);});
  fileInput.addEventListener('change', e=> handleFile(e.target.files[0]));

  async function ensureModel(){ if(net) return net; net = await bodyPix.load({architecture:'MobileNetV1', outputStride:16, multiplier:0.75, quantBytes:2}); return net; }

  function handleFile(file){ if(!file) return; const url = URL.createObjectURL(file); const im = new Image(); im.onload = ()=>{ sourceImage = im; URL.revokeObjectURL(url); fitCanvasToImage(sourceImage); ctx.clearRect(0,0,canvas.width,canvas.height); ctx.drawImage(sourceImage,0,0,canvas.width,canvas.height); removeBtn.disabled=false; downloadBtn.disabled=true; meta.textContent=`${sourceImage.width}×${sourceImage.height}`; }; im.src=url; }

  async function removeBackground(){ if(!sourceImage.src) return; removeBtn.disabled=true; downloadBtn.disabled=true; await ensureModel(); const off=document.createElement('canvas'); off.width=sourceImage.naturalWidth||sourceImage.width; off.height=sourceImage.naturalHeight||sourceImage.height; off.getContext('2d').drawImage(sourceImage,0,0,off.width,off.height); const segmentation=await net.segmentPerson(off,{internalResolution:'high',segmentationThreshold:parseFloat(threshold.value)}); const mask=bodyPix.toMask(segmentation,{r:0,g:0,b:0,a:0},{r:0,g:0,b:0,a:255}); const res=document.createElement('canvas'); res.width=off.width; res.height=off.height; bodyPix.drawMask(res,off,mask,1,parseInt(blur.value),false); fitCanvasToImage(res); const fit=fitContain(res.width,res.height,canvas.width,canvas.height); ctx.clearRect(0,0,canvas.width,canvas.height); ctx.drawImage(res,fit.x,fit.y,fit.w,fit.h); if(lastResultBlobUrl){URL.revokeObjectURL(lastResultBlobUrl);} const blob=await new Promise(resolve=>res.toBlob(resolve,'image/png')); lastResultBlobUrl=URL.createObjectURL(blob); downloadBtn.disabled=false; removeBtn.disabled=false; }

  removeBtn.addEventListener('click',removeBackground);

  // Video ad flow on Download
  async function showVideoAdThenDownload(){
    if(!lastResultBlobUrl) return; // nothing to download
    // Load a placeholder video (royalty-free or blank). In production, integrate your ad SDK.
    adVideo.src = '';
    videoAdModal.classList.add('show');
    let secs=5; adCountdown.textContent=secs; skipAd.disabled=true; const timer=setInterval(()=>{secs--; adCountdown.textContent=secs; if(secs<=0){ clearInterval(timer); skipAd.disabled=false; skipAndDownload(); }},1000);
    skipAd.onclick = ()=>{ clearInterval(timer); skipAndDownload(); };
  }
  function skipAndDownload(){ videoAdModal.classList.remove('show'); triggerDownload(); }
  function triggerDownload(){ const a=document.createElement('a'); a.href=lastResultBlobUrl; a.download='cutout.png'; document.body.appendChild(a); a.click(); a.remove(); }

  downloadBtn.addEventListener('click', showVideoAdThenDownload);

  fitBtn.addEventListener('click',()=>{ if(sourceImage.src){ ctx.clearRect(0,0,canvas.width,canvas.height); ctx.drawImage(sourceImage,0,0,canvas.width,canvas.height);} });
  resetBtn.addEventListener('click',()=>{ threshold.value=0.7; blur.value=8; updateLabels(); if(sourceImage.src){ ctx.clearRect(0,0,canvas.width,canvas.height); ctx.drawImage(sourceImage,0,0,canvas.width,canvas.height);} });
  [threshold,blur].forEach(el=>el.addEventListener('input',updateLabels));
  updateLabels();
</script>
</body>
</html>
